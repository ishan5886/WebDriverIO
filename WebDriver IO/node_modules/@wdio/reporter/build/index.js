"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.RunnerStats = exports.TestStats = exports.HookStats = exports.SuiteStats = void 0;
const fs_1 = __importDefault(require("fs"));
const fs_extra_1 = require("fs-extra");
const events_1 = require("events");
const utils_1 = require("./utils");
const suite_1 = __importDefault(require("./stats/suite"));
exports.SuiteStats = suite_1.default;
const hook_1 = __importDefault(require("./stats/hook"));
exports.HookStats = hook_1.default;
const test_1 = __importDefault(require("./stats/test"));
exports.TestStats = test_1.default;
const runner_1 = __importDefault(require("./stats/runner"));
exports.RunnerStats = runner_1.default;
class WDIOReporter extends events_1.EventEmitter {
    constructor(options) {
        super();
        this.options = options;
        this.failures = 0;
        this.suites = {};
        this.hooks = {};
        this.tests = {};
        this.currentSuites = [];
        this.counts = {
            suites: 0,
            tests: 0,
            hooks: 0,
            passes: 0,
            skipping: 0,
            failures: 0
        };
        this.retries = 0;
        this.isContentPresent = false;
        this.specs = [];
        // ensure the report directory exists
        if (this.options.outputDir) {
            fs_extra_1.ensureDirSync(this.options.outputDir);
        }
        this.outputStream = (this.options.stdout || !this.options.logFile) && this.options.writeStream
            ? this.options.writeStream
            : fs_extra_1.createWriteStream(this.options.logFile);
        let currentTest;
        const rootSuite = new suite_1.default({
            title: '(root)',
            fullTitle: '(root)',
            file: ''
        });
        this.currentSuites.push(rootSuite);
        this.on('client:beforeCommand', this.onBeforeCommand.bind(this));
        this.on('client:afterCommand', this.onAfterCommand.bind(this));
        this.on('runner:start', /* istanbul ignore next */ (runner) => {
            rootSuite.cid = runner.cid;
            this.specs.push(...runner.specs);
            this.runnerStat = new runner_1.default(runner);
            this.onRunnerStart(this.runnerStat);
        });
        this.on('suite:start', /* istanbul ignore next */ (params) => {
            /**
             * the jasmine framework doesn't give us information about the file
             * therefor we need to propagate these information into params
             */
            if (!params.file) {
                params.file = !params.parent
                    ? this.specs.shift() || 'unknown spec file'
                    : this.currentSpec;
                this.currentSpec = params.file;
            }
            const suite = new suite_1.default(params);
            const currentSuite = this.currentSuites[this.currentSuites.length - 1];
            currentSuite.suites.push(suite);
            this.currentSuites.push(suite);
            this.suites[suite.uid] = suite;
            this.onSuiteStart(suite);
        });
        this.on('hook:start', /* istanbul ignore next */ (hook) => {
            const hookStats = new hook_1.default(hook);
            const currentSuite = this.currentSuites[this.currentSuites.length - 1];
            currentSuite.hooks.push(hookStats);
            currentSuite.hooksAndTests.push(hookStats);
            this.hooks[hook.uid] = hookStats;
            this.onHookStart(hookStats);
        });
        this.on('hook:end', /* istanbul ignore next */ (hook) => {
            const hookStats = this.hooks[hook.uid];
            hookStats.complete(utils_1.getErrorsFromEvent(hook));
            this.counts.hooks++;
            this.onHookEnd(hookStats);
        });
        this.on('test:start', /* istanbul ignore next */ (test) => {
            test.retries = this.retries;
            currentTest = new test_1.default(test);
            const currentSuite = this.currentSuites[this.currentSuites.length - 1];
            currentSuite.tests.push(currentTest);
            currentSuite.hooksAndTests.push(currentTest);
            this.tests[test.uid] = currentTest;
            this.onTestStart(currentTest);
        });
        this.on('test:pass', /* istanbul ignore next */ (test) => {
            const testStat = this.tests[test.uid];
            testStat.pass();
            this.counts.passes++;
            this.counts.tests++;
            this.onTestPass(testStat);
        });
        this.on('test:fail', /* istanbul ignore next */ (test) => {
            const testStat = this.tests[test.uid];
            testStat.fail(utils_1.getErrorsFromEvent(test));
            this.counts.failures++;
            this.counts.tests++;
            this.onTestFail(testStat);
        });
        this.on('test:retry', (test) => {
            const testStat = this.tests[test.uid];
            testStat.fail(utils_1.getErrorsFromEvent(test));
            this.onTestRetry(testStat);
            this.retries++;
        });
        this.on('test:pending', (test) => {
            test.retries = this.retries;
            const currentSuite = this.currentSuites[this.currentSuites.length - 1];
            currentTest = new test_1.default(test);
            /**
             * In Mocha: tests that are skipped don't have a start event but a test end.
             * In Jasmine: tests have a start event, therefor we need to replace the
             * test instance with the pending test here
             */
            if (test.uid in this.tests && this.tests[test.uid].state !== 'pending') {
                currentTest.uid = test.uid in this.tests ? 'skipped-' + this.counts.skipping : currentTest.uid;
            }
            const suiteTests = currentSuite.tests;
            if (!suiteTests.length || currentTest.uid !== suiteTests[suiteTests.length - 1].uid) {
                currentSuite.tests.push(currentTest);
                currentSuite.hooksAndTests.push(currentTest);
            }
            else {
                suiteTests[suiteTests.length - 1] = currentTest;
                currentSuite.hooksAndTests[currentSuite.hooksAndTests.length - 1] = currentTest;
            }
            this.tests[currentTest.uid] = currentTest;
            currentTest.skip(test.pendingReason);
            this.counts.skipping++;
            this.counts.tests++;
            this.onTestSkip(currentTest);
        });
        this.on('test:end', /* istanbul ignore next */ (test) => {
            const testStat = this.tests[test.uid];
            this.retries = 0;
            this.onTestEnd(testStat);
        });
        this.on('suite:end', /* istanbul ignore next */ (suite) => {
            const suiteStat = this.suites[suite.uid];
            suiteStat.complete();
            this.currentSuites.pop();
            this.onSuiteEnd(suiteStat);
        });
        this.on('runner:end', /* istanbul ignore next */ (runner) => {
            rootSuite.complete();
            if (this.runnerStat) {
                this.runnerStat.failures = runner.failures;
                this.runnerStat.retries = runner.retries;
                this.runnerStat.complete();
                this.onRunnerEnd(this.runnerStat);
            }
            const logFile = this.options.logFile;
            if (!this.isContentPresent && logFile && fs_1.default.existsSync(logFile)) {
                fs_1.default.unlinkSync(logFile);
            }
        });
        /**
         * browser client event handlers
         */
        this.on('client:beforeCommand', /* istanbul ignore next */ (payload) => {
            if (!currentTest) {
                return;
            }
            currentTest.output.push(Object.assign(payload, { type: 'command' }));
        });
        this.on('client:afterCommand', /* istanbul ignore next */ (payload) => {
            if (!currentTest) {
                return;
            }
            currentTest.output.push(Object.assign(payload, { type: 'result' }));
        });
    }
    /**
     * allows reporter to stale process shutdown process until required sync work
     * is done (e.g. when having to send data to some server or any other async work)
     */
    get isSynchronised() {
        return true;
    }
    /**
     * function to write to reporters output stream
     */
    write(content) {
        if (content) {
            this.isContentPresent = true;
        }
        this.outputStream.write(content);
    }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onRunnerStart(runnerStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onBeforeCommand(commandArgs) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onAfterCommand(commandArgs) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onSuiteStart(suiteStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onHookStart(hookStat) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onHookEnd(hookStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onTestStart(testStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onTestPass(testStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onTestFail(testStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onTestRetry(testStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onTestSkip(testStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onTestEnd(testStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onSuiteEnd(suiteStats) { }
    /* istanbul ignore next */
    // eslint-disable-next-line @typescript-eslint/no-unused-vars
    onRunnerEnd(runnerStats) { }
}
exports.default = WDIOReporter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi9zcmMvaW5kZXgudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsNENBQW1CO0FBRW5CLHVDQUEyRDtBQUMzRCxtQ0FBcUM7QUFHckMsbUNBQTRDO0FBQzVDLDBEQUFpRDtBQTJRN0MscUJBM1FHLGVBQVUsQ0EyUUg7QUExUWQsd0RBQThDO0FBMFF6QixvQkExUWQsY0FBUyxDQTBRYztBQXpROUIsd0RBQThDO0FBeVFkLG9CQXpRekIsY0FBUyxDQXlReUI7QUF4UXpDLDREQUFvRDtBQXdRVCxzQkF4UXBDLGdCQUFXLENBd1FvQztBQW5RdEQsTUFBcUIsWUFBYSxTQUFRLHFCQUFZO0lBcUJsRCxZQUFtQixPQUFtQztRQUNsRCxLQUFLLEVBQUUsQ0FBQTtRQURRLFlBQU8sR0FBUCxPQUFPLENBQTRCO1FBbkJ0RCxhQUFRLEdBQUcsQ0FBQyxDQUFBO1FBQ1osV0FBTSxHQUErQixFQUFFLENBQUE7UUFDdkMsVUFBSyxHQUE4QixFQUFFLENBQUE7UUFDckMsVUFBSyxHQUE2QixFQUFFLENBQUE7UUFDcEMsa0JBQWEsR0FBaUIsRUFBRSxDQUFBO1FBQ2hDLFdBQU0sR0FBRztZQUNMLE1BQU0sRUFBRSxDQUFDO1lBQ1QsS0FBSyxFQUFFLENBQUM7WUFDUixLQUFLLEVBQUUsQ0FBQztZQUNSLE1BQU0sRUFBRSxDQUFDO1lBQ1QsUUFBUSxFQUFFLENBQUM7WUFDWCxRQUFRLEVBQUUsQ0FBQztTQUNkLENBQUE7UUFDRCxZQUFPLEdBQUcsQ0FBQyxDQUFBO1FBRVgscUJBQWdCLEdBQUcsS0FBSyxDQUFBO1FBQ3hCLFVBQUssR0FBYSxFQUFFLENBQUE7UUFNaEIscUNBQXFDO1FBQ3JDLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUU7WUFDeEIsd0JBQWEsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsQ0FBQyxDQUFBO1NBQ3hDO1FBRUQsSUFBSSxDQUFDLFlBQVks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